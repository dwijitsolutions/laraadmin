/*! jquery-locationpicker - v0.1.15 - 2016-09-26 */

!function(a){function b(a,b){var c=new google.maps.Map(a,b),d=new google.maps.Marker({position:new google.maps.LatLng(54.19335,-3.92695),map:c,title:"Drag Me",visible:b.markerVisible,draggable:b.markerDraggable,icon:void 0!==b.markerIcon?b.markerIcon:void 0});return{map:c,marker:d,circle:null,location:d.position,radius:b.radius,locationName:b.locationName,addressComponents:{formatted_address:null,addressLine1:null,addressLine2:null,streetName:null,streetNumber:null,city:null,district:null,state:null,stateOrProvince:null},settings:b.settings,domContainer:a,geodecoder:new google.maps.Geocoder}}function d(a){return void 0!=e(a)}function e(b){return a(b).data("locationpicker")}function f(a,b){if(a){var d=c.locationFromLatLng(b.marker.position);a.latitudeInput&&a.latitudeInput.val(d.latitude).change(),a.longitudeInput&&a.longitudeInput.val(d.longitude).change(),a.radiusInput&&a.radiusInput.val(b.radius).change(),a.locationNameInput&&a.locationNameInput.val(b.locationName).change()}}function g(b,d){if(b){if(b.radiusInput&&b.radiusInput.on("change",function(b){var e=a(this).val();b.originalEvent&&!isNaN(e)&&(d.radius=e,c.setPosition(d,d.location,function(a){a.settings.onchanged.apply(d.domContainer,[c.locationFromLatLng(a.location),a.radius,!1])}))}),b.locationNameInput&&d.settings.enableAutocomplete){var e=!1;d.autocomplete=new google.maps.places.Autocomplete(b.locationNameInput.get(0),d.settings.autocompleteOptions),google.maps.event.addListener(d.autocomplete,"place_changed",function(){e=!1;var a=d.autocomplete.getPlace();return a.geometry?void c.setPosition(d,a.geometry.location,function(a){f(b,a),a.settings.onchanged.apply(d.domContainer,[c.locationFromLatLng(a.location),a.radius,!1])}):void d.settings.onlocationnotfound(a.name)}),google.maps.event.addDomListener(b.locationNameInput.get(0),"keydown",function(a){13==a.keyCode&&a.preventDefault()}),d.settings.enableAutocompleteBlur&&(b.locationNameInput.on("change",function(a){a.originalEvent&&(e=!0)}),b.locationNameInput.on("blur",function(g){g.originalEvent&&setTimeout(function(){var g=a(b.locationNameInput).val();g.length>5&&e&&(e=!1,d.geodecoder.geocode({address:g},function(a,e){e==google.maps.GeocoderStatus.OK&&a&&a.length&&c.setPosition(d,a[0].geometry.location,function(a){f(b,a),a.settings.onchanged.apply(d.domContainer,[c.locationFromLatLng(a.location),a.radius,!1])})}))},1e3)}))}b.latitudeInput&&b.latitudeInput.on("change",function(b){var e=a(this).val();b.originalEvent&&!isNaN(e)&&c.setPosition(d,new google.maps.LatLng(e,d.location.lng()),function(a){a.settings.onchanged.apply(d.domContainer,[c.locationFromLatLng(a.location),a.radius,!1]),f(d.settings.inputBinding,d)})}),b.longitudeInput&&b.longitudeInput.on("change",function(b){var e=a(this).val();b.originalEvent&&!isNaN(e)&&c.setPosition(d,new google.maps.LatLng(d.location.lat(),e),function(a){a.settings.onchanged.apply(d.domContainer,[c.locationFromLatLng(a.location),a.radius,!1]),f(d.settings.inputBinding,d)})})}}function h(a){google.maps.event.trigger(a.map,"resize"),setTimeout(function(){a.map.setCenter(a.marker.position)},300)}function i(b,d,e){var f=a.extend({},a.fn.locationpicker.defaults,e),h=f.location.latitude,i=f.location.longitude,j=f.radius,k=b.settings.location.latitude,l=b.settings.location.longitude,m=b.settings.radius;h==k&&i==l&&j==m||(b.settings.location.latitude=h,b.settings.location.longitude=i,b.radius=j,c.setPosition(b,new google.maps.LatLng(b.settings.location.latitude,b.settings.location.longitude),function(a){g(b.settings.inputBinding,b),a.settings.oninitialized(d)}))}var c={drawCircle:function(b,c,d,e){return null!=b.circle&&b.circle.setMap(null),d>0?(d*=1,e=a.extend({strokeColor:"#0000FF",strokeOpacity:.35,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.2},e),e.map=b.map,e.radius=d,e.center=c,b.circle=new google.maps.Circle(e),b.circle):null},setPosition:function(a,b,c){a.location=b,a.marker.setPosition(b),a.map.panTo(b),this.drawCircle(a,b,a.radius,{}),a.settings.enableReverseGeocode?this.updateLocationName(a,c):c&&c.call(this,a)},locationFromLatLng:function(a){return{latitude:a.lat(),longitude:a.lng()}},addressByFormat:function(a,b){for(var c=null,d=a.length-1;d>=0;d--)a[d].types.indexOf(b)>=0&&(c=a[d]);return c||a[0]},updateLocationName:function(a,b){a.geodecoder.geocode({latLng:a.marker.position},function(d,e){if(e==google.maps.GeocoderStatus.OK&&d.length>0){var f=c.addressByFormat(d,a.settings.addressFormat);a.locationName=f.formatted_address,a.addressComponents=c.address_component_from_google_geocode(f.address_components)}else if(e==google.maps.GeocoderStatus.OVER_QUERY_LIMIT)return setTimeout(function(){c.updateLocationName(a,b)},1e3);b&&b.call(this,a)})},address_component_from_google_geocode:function(a){for(var b={},c=a.length-1;c>=0;c--){var d=a[c];d.types.indexOf("postal_code")>=0?b.postalCode=d.short_name:d.types.indexOf("street_number")>=0?b.streetNumber=d.short_name:d.types.indexOf("route")>=0?b.streetName=d.short_name:d.types.indexOf("locality")>=0?b.city=d.short_name:d.types.indexOf("sublocality")>=0?b.district=d.short_name:d.types.indexOf("administrative_area_level_1")>=0?b.stateOrProvince=d.short_name:d.types.indexOf("country")>=0&&(b.country=d.short_name)}return b.addressLine1=[b.streetNumber,b.streetName].join(" ").trim(),b.addressLine2="",b}};a.fn.locationpicker=function(j,k){if("string"==typeof j){var l=this.get(0);if(!d(l))return;var m=e(l);switch(j){case"location":if(void 0==k){var n=c.locationFromLatLng(m.location);return n.radius=m.radius,n.name=m.locationName,n}k.radius&&(m.radius=k.radius),c.setPosition(m,new google.maps.LatLng(k.latitude,k.longitude),function(a){f(a.settings.inputBinding,a)});break;case"subscribe":if(void 0==k)return null;var o=k.event,p=k.callback;if(!o||!p)return console.error('LocationPicker: Invalid arguments for method "subscribe"'),null;google.maps.event.addListener(m.map,o,p);break;case"map":if(void 0==k){var q=c.locationFromLatLng(m.location);return q.formattedAddress=m.locationName,q.addressComponents=m.addressComponents,{map:m.map,marker:m.marker,location:q}}return null;case"autosize":return h(m),this}return null}return this.each(function(){function m(){c.setPosition(l,l.marker.position,function(a){var b=c.locationFromLatLng(l.location);f(l.settings.inputBinding,l),a.settings.onchanged.apply(l.domContainer,[b,a.radius,!0])})}var h=a(this);if(d(this))return void i(e(this),a(this),j);var k=a.extend({},a.fn.locationpicker.defaults,j),l=new b(this,a.extend({},k.mapOptions,{zoom:k.zoom,center:new google.maps.LatLng(k.location.latitude,k.location.longitude),mapTypeId:k.mapTypeId,mapTypeControl:!1,styles:k.styles,disableDoubleClickZoom:!1,scrollwheel:k.scrollwheel,streetViewControl:!1,radius:k.radius,locationName:k.locationName,settings:k,autocompleteOptions:k.autocompleteOptions,addressFormat:k.addressFormat,draggable:k.draggable,markerIcon:k.markerIcon,markerDraggable:k.markerDraggable,markerVisible:k.markerVisible}));h.data("locationpicker",l),k.markerInCenter&&(l.map.addListener("bounds_changed",function(){l.marker.dragging||(l.marker.setPosition(l.map.center),f(l.settings.inputBinding,l))}),l.map.addListener("idle",function(){l.marker.dragging||m()})),google.maps.event.addListener(l.marker,"drag",function(a){f(l.settings.inputBinding,l)}),google.maps.event.addListener(l.marker,"dragend",function(a){m()}),c.setPosition(l,new google.maps.LatLng(k.location.latitude,k.location.longitude),function(a){f(k.inputBinding,l),g(k.inputBinding,l),a.settings.oninitialized(h)})})},a.fn.locationpicker.defaults={location:{latitude:40.7324319,longitude:-73.82480777777776},locationName:"",radius:500,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[],mapOptions:{},scrollwheel:!0,inputBinding:{latitudeInput:null,longitudeInput:null,radiusInput:null,locationNameInput:null},enableAutocomplete:!1,enableAutocompleteBlur:!1,autocompleteOptions:null,addressFormat:"postal_code",enableReverseGeocode:!0,draggable:!0,onchanged:function(a,b,c){},onlocationnotfound:function(a){},oninitialized:function(a){},markerIcon:void 0,markerDraggable:!0,markerVisible:!0}}(jQuery);
//# sourceMappingURL=locationpicker.jquery.min.js.map